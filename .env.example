# Tesla LibreTV 环境配置示例
# 复制此文件为 .env 并根据需要修改配置

# ===========================================
# 基础服务配置
# ===========================================

# 应用环境
NODE_ENV=production

# 服务端口配置
PORT=8080
PROXY_PORT=3001
WEBRTC_PORT=3002

# 应用密码（用于管理界面访问）
PASSWORD=tesla_libretv_2024

# ===========================================
# Tesla 特定配置
# ===========================================

# 启用 Tesla 优化模式
TESLA_MODE=true

# Tesla 缓存大小（MB）
TESLA_CACHE_SIZE=100

# Tesla 最大比特率（bps）
TESLA_MAX_BITRATE=2000000

# Tesla 最大分辨率
TESLA_MAX_RESOLUTION=1920x1200

# 启用 Tesla 降级机制
TESLA_FALLBACK_ENABLED=true

# ===========================================
# 代理服务器配置
# ===========================================

# 代理超时时间（毫秒）
PROXY_TIMEOUT=30000

# 代理最大连接数
PROXY_MAX_CONNECTIONS=100

# ===========================================
# WebRTC 配置
# ===========================================

# STUN 服务器
STUN_SERVER=stun:stun.l.google.com:19302

# WebRTC 连接超时（毫秒）
WEBRTC_TIMEOUT=15000

# WebRTC 重试次数
WEBRTC_RETRY_ATTEMPTS=3

# ===========================================
# 数据库配置
# ===========================================

# Redis 连接 URL
REDIS_URL=redis://localhost:6379

# ===========================================
# 安全配置
# ===========================================

# 启用内容安全策略
CSP_ENABLED=true

# CORS 允许的源
CORS_ORIGIN=*

# 速率限制（每分钟请求数）
RATE_LIMIT=100

# 安全配置（保留原有配置）
BLOCKED_HOSTS=localhost,127.0.0.1,0.0.0.0,::1
BLOCKED_IP_PREFIXES=192.168.,10.,172.
FILTERED_HEADERS=content-security-policy,cookie,set-cookie,x-frame-options,access-control-allow-origin

# ===========================================
# 监控和日志配置
# ===========================================

# 启用监控
MONITORING_ENABLED=true

# 日志级别 (error, warn, info, debug)
LOG_LEVEL=info

# 启用调试模式
DEBUG=false

# ===========================================
# 缓存配置
# ===========================================

# 静态资源缓存时间
CACHE_MAX_AGE=1d

# API 响应缓存时间（秒）
API_CACHE_MAX_AGE=300

# 视频内容缓存时间（秒）
VIDEO_CACHE_MAX_AGE=86400

# ===========================================
# 请求配置
# ===========================================

# 请求超时时间（毫秒）
REQUEST_TIMEOUT=5000

# 最大重试次数
MAX_RETRIES=3

# 用户代理字符串
USER_AGENT=Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36 Tesla

# ===========================================
# 性能优化配置
# ===========================================

# 启用集群模式
CLUSTER_MODE=false

# 内存限制（MB）
MEMORY_LIMIT=512

# CPU 使用率阈值（%）
CPU_THRESHOLD=80
